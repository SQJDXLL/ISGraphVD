int __fastcall cache_insert(int a1, _DWORD *a2, int a3, int a4, unsigned __int16 a5)
{
  int v7; // $s7
  int v8; // $s2
  int v9; // $s5
  int v10; // $a0
  int v11; // $s0
  int v12; // $a1
  int v13; // $a2
  int v14; // $a3
  int v15; // $s1
  int v16; // $v0
  int v17; // $v0
  int v18; // $a1
  int v19; // $v1
  int v20; // $a0
  int v21; // $a0

  log_query(a5 | 0x400, a1, a2, 0, 0, 0);
  v7 = a5 & 4;
  v8 = a5 & 0xFFFD;
  v9 = 0;
  v10 = 0;
  if ( !dword_457834 )
  {
    if ( sub_402434(a1, a2, a3, v8) )
    {
      while ( 1 )
      {
        v11 = dword_457828;
        v12 = 0;
        v13 = a3;
        v14 = 0;
        if ( !dword_457828 )
          break;
        v15 = *(unsigned __int16 *)(dword_457828 + 36);
        if ( (v15 & 0xC) == 0 )
        {
          if ( a1 && (unsigned int)strlen(a1, 0, a3, 0) >= 0x28 )
          {
            v9 = dword_457820;
            if ( dword_457820 )
            {
              dword_457820 = *(_DWORD *)dword_457820;
            }
            else
            {
              if ( !dword_457838 )
                break;
              v9 = whine_malloc(1028);
              if ( !v9 )
                break;
              --dword_457838;
            }
          }
          sub_40232C(v11, v12, v13, v14);
          *(_WORD *)(v11 + 36) = v8;
          if ( v9 )
          {
            *(_DWORD *)(v11 + 40) = v9;
            *(_WORD *)(v11 + 36) = v8 | 0x200;
          }
          if ( a1 )
          {
            v17 = cache_get_name(v11);
            strcpy(v17, a1);
          }
          else
          {
            *(_BYTE *)cache_get_name(v11) = 0;
          }
          if ( a2 )
          {
            v18 = a2[3];
            v19 = a2[1];
            v20 = a2[2];
            *(_DWORD *)(v11 + 20) = *a2;
            *(_DWORD *)(v11 + 24) = v19;
            *(_DWORD *)(v11 + 28) = v20;
            *(_DWORD *)(v11 + 32) = v18;
          }
          else
          {
            *(_DWORD *)(v11 + 20) = 0;
          }
          v21 = dword_457830;
          *(_DWORD *)(v11 + 12) = a3 + a4;
          *(_DWORD *)v11 = v21;
          dword_457830 = v11;
          return v11;
        }
        if ( v7 )
        {
          v16 = cache_get_name(dword_457828);
          sub_402434(v16, v11 + 20, a3, v15);
          ++dword_45781C;
        }
        else
        {
          v7 = 1;
          sub_402434(0, 0, a3, 0);
        }
      }
    }
    v10 = 0;
    dword_457834 = 1;
  }
  return v10;
}
