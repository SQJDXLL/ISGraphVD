int __fastcall cache_insert(const char *a1, const void *a2, int a3, int a4, unsigned __int16 a5)
{
  int result; // $v0
  __int16 v10; // $s4
  int v11; // $s5
  int v12; // $s0
  int v13; // $a3
  int v14; // $a0
  int v15; // $v0
  bool v16; // dc
  _DWORD *v17; // $a0
  __int16 v18; // $v0
  int v19; // $v1
  int v20; // $v0
  char *v21; // $a0
  int v22; // $v0
  _BYTE *v23; // $v1

  log_query(a5 | 0x400, a1, a2, 0, 0, 0);
  result = 0;
  if ( !dword_425E44 )
  {
    v10 = a5 & 0xFFFD;
    v11 = a5 & 4;
    if ( !sub_403AAC(a1, a2, a3, a5 & 0xFFFD) )
    {
      v12 = 0;
      dword_425E44 = 1;
      return v12;
    }
    while ( 1 )
    {
      v12 = dword_425E38;
      if ( !dword_425E38 )
      {
        dword_425E44 = 1;
        return v12;
      }
      v13 = *(unsigned __int16 *)(dword_425E38 + 36);
      if ( (v13 & 0xC) == 0 )
        break;
      if ( v11 )
      {
        if ( (v13 & 0x200) != 0 || (v14 = dword_425E38 + 40, (v13 & 0x10) != 0) )
          v14 = *(_DWORD *)(dword_425E38 + 40);
        sub_403AAC(v14, dword_425E38 + 20, a3, v13);
        ++dword_425E24;
      }
      else
      {
        v11 = 1;
        sub_403AAC(0, 0, a3, 0);
      }
    }
    v15 = 0;
    if ( a1 )
    {
      v16 = strlen(a1) < 0x28;
      v15 = 0;
      if ( !v16 )
      {
        v15 = dword_425E30;
        if ( dword_425E30 )
        {
          dword_425E30 = *(_DWORD *)dword_425E30;
        }
        else
        {
          if ( !dword_425E48 || (v15 = whine_malloc(1028)) == 0 )
          {
            dword_425E44 = 1;
            return 0;
          }
          --dword_425E48;
        }
      }
    }
    v17 = *(_DWORD **)(v12 + 4);
    if ( v17 )
      *v17 = *(_DWORD *)v12;
    else
      dword_425E34 = *(_DWORD *)v12;
    if ( *(_DWORD *)v12 )
      *(_DWORD *)(*(_DWORD *)v12 + 4) = *(_DWORD *)(v12 + 4);
    else
      dword_425E38 = *(_DWORD *)(v12 + 4);
    *(_WORD *)(v12 + 36) = v10;
    if ( v15 )
    {
      *(_DWORD *)(v12 + 40) = v15;
      *(_WORD *)(v12 + 36) = v10 | 0x200;
    }
    v18 = *(_WORD *)(v12 + 36);
    v19 = v18 & 0x200;
    if ( a1 )
    {
      v20 = v18 & 0x10;
      if ( v19 || (v21 = (char *)(v12 + 40), v20) )
        v21 = *(char **)(v12 + 40);
      strcpy(v21, a1);
    }
    else
    {
      v22 = v18 & 0x10;
      if ( v19 || (v23 = (_BYTE *)(v12 + 40), v22) )
        v23 = *(_BYTE **)(v12 + 40);
      *v23 = 0;
    }
    if ( a2 )
      memcpy((void *)(v12 + 20), a2, 0x10u);
    else
      *(_DWORD *)(v12 + 20) = 0;
    *(_DWORD *)(v12 + 12) = a4 + a3;
    *(_DWORD *)v12 = dword_425E40;
    dword_425E40 = v12;
    return v12;
  }
  return result;
}
